# 骨骼动画相关参数

（此章节较大程度上参考了风祭的编辑器教程）

## 骨骼

骨骼存储了网格的蒙皮数据以及自身的动画数据，动画数据不仅包含坐标变换，还包含有显示数据，决定骨骼在每一帧是显示还是隐藏。当然骨骼本身并没有显示或隐藏一说，因为其自身并不参与渲染，其显示帧数用于控制绑定于其上的网格、粒子与尾迹，以骨骼的显示动画数据决定这些元素的显示与隐藏。

### 骨骼名称

一般情况下无需更改此项，但是需要注意的是人物模型的骨骼必须以`Bip`作为前缀，否则会出现人物移动时不播放动画，人物在地面上滑动的后果。

### 调整显示帧数

此功能可以直接修改骨骼的显示帧数而无需通过3ds Max进行修改。输入方式为起始帧数、终止帧数、显示/隐藏，以英文分号分隔，例如希望将该骨骼100帧到200帧设置为显示状态，那么输入应为：

> 100;200;1

如果要设置隐藏状态则最后一个参数为0。

## 动画

X文件的动画仅包含每个动作片段的开始与起始帧数，并不包含实际的动画数据，任何修改动画数据的操作（除去骨骼的显示帧数）都需通过3ds Max完成。一般一个人物模型的动画包含：

* `bat_idle`：人物站立时动作。
* `bat_run`：人物奔跑时动作。
* `bat_specialidle`：Ctrl+F1的动作。
* `single_run`：人物快速奔跑的动作（移动速度大于430时）。
* `dance`：Ctrl+F4的动作。
* `dead`：人物死亡的动作。死亡后将保持在死亡动作的最后一帧。
* `relive`：人物重生时的动作。
* `single_attack_attcom_x`：普通攻击动作，可以自行增加数量。
* `single_skill_0x`：技能动作。
* `single_chuansong`：传送和回城动作，有些英雄会有单独的回城模型文件。
* `single_touzhi_x`：使用道具动作。
* `bingdong`：模型初始动作，意义不明，一般只有1帧长度。

其中x代表1到9的数字，代表此类动画由多个动作组成。一般在制作人物模型时，可以直接从原始人物模型保存动画模板，在新模型中加载动画模板，可以保证不遗漏某个动画。

特效X文件也有其动画配置，一般包含：

* `born`：特效开始时的动画。
* `idle`：特效处于开始与结束之间的动画。
* `dead`：特效消失时的动画。

一般来说，一个特效会先播放开始动画，再循环播放中间动画，最后播放消失动画并结束。

当一个文件不存在任何动画时，则会循环播放文件的所有动画帧数。若游戏寻找的动画并不存在，则会默认播放文件内的第一个动画。

一些动画（如回城动画）是锁定了播放时间的，增加或减少动画的长度只会影响播放速度而无法改变动画的时长。